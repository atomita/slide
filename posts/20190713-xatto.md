# [xatto](https://www.npmjs.com/package/xatto)のこと

2019-07-13

atomita



## Hackers Champloo 2018(昨年)で、xattoを作ったってLTしてました

http://atomita.github.io/slide/20180630-xatto-intoro.html



<iframe height="265" style="width: 100%;" scrolling="no" title="counters by xatto v1" src="//codepen.io/atomita/embed/OaLxwP/?height=265&theme-id=0&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/atomita/pen/OaLxwP/'>counters by xatto v1</a> by atomita
  (<a href='https://codepen.io/atomita'>@atomita</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>



## 現在 v1.4.1



## Productに投入してます



```jsx
import { x } from 'xatto'
import { DefaultLayout } from '../../layouts/DefaultLayout'
import { HomePageAction } from './Action'
import { HomePageView } from './View'
import './style.styl'

const View = HomePageAction(HomePageView)

export function HomePage ({ xa, ...props }, children, context, extra) {
  return (
    <DefaultLayout>
      <View {...props} />
    </DefaultLayout>
  )
}
```



HomePageView (1/2)

```jsx
import { x } from 'xatto'
import { RouteLink } from 'xatto-route'
import { ButtonComponent } from '../../components/ButtonComponent'
import { CarouselComponent } from '../../components/CarouselComponent'
import { HeaderIconComponent } from '../../components/HeaderIconComponent'
import { LinkButtonComponent } from '../../components/LinkButtonComponent'
import { NewsLinkComponent } from '../../components/NewsLinkComponent'

function onCreateKV (context, { dispatch }, props, { target }) {
  const observer = new IntersectionObserver(
    (entries) => dispatch('ScrolledKV', { isIntersecting: entries[0].isIntersecting })
  )
  observer.observe(target)

  return {
    hideHeader: true
  }
}
```




HomePageView (2/2)

```jsx
function onScrolledKV (context, { isIntersecting }) {
  return {
    hideHeader: isIntersecting
  }
}

export function HomePageView (props: any, children, context, extra) {
  return (
    <div class="homePage" key="homePage">
      <header class="homePage_head">
        <div class="homePage_head_icon">
          <HeaderIconComponent type="hamburger" />
        </div>
        <div class="homePage_kv" oncreate={onCreateKV} onScrolledKV={onScrolledKV}>
          <span class="homePage_kv_topCaption">
```



## そろそろ v2 ?



現状、後方互換のために`context`, `extra`の受け渡し方法が2種類あるので、後発の形だけにしたいと思ってます

lifecycle eventsも少し変わるかも



## whoami

- [atomita](https://github.com/atomita)
- Programmer
- 琉球インタラクティブ  
  
- [Hackers Champloo](http://hackers-champloo.org/)
- [Okinawa.go](https://okinawa-go.doorkeeper.jp/)



## End
